{"version":3,"file":"camera.min.js","sources":["../src/camera.js"],"sourcesContent":["/**\r\n * Saves the image and ...\r\n * @param {video} video - The camera feedback\r\n * @param {canvas} canvas - The canvas where the image will be temporally saved\r\n * @returns Nothing\r\n */\r\nfunction save_image(video, canvas) {\r\n    canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);\r\n}\r\n\r\n/**\r\n * Get the current time value from local storage\r\n * @returns {number} A number that represents time.\r\n */\r\nfunction getFromLocalStorage() {\r\n    return parseInt(localStorage.getItem(\"timeTranscurred\"));\r\n}\r\n\r\n/**\r\n * Put a value of the local storage.\r\n * @param {number} seconds A number which represents the time transcurred in the timer\r\n */\r\nfunction pushToLocalStorage(seconds) {\r\n    console.log(seconds);\r\n    localStorage.setItem(\"timeTranscurred\", seconds.toString());\r\n}\r\n\r\nexport const init = (timer) => {\r\n    let video = document.querySelector(\"#camera\");\r\n    let canvas = document.querySelector(\"#canvas\");\r\n    let save_button = document.querySelector(\"#save_button\");\r\n\r\n    navigator.mediaDevices.getUserMedia({ video: true, audio: false }).then((stream) => {\r\n        video.srcObject = stream;\r\n        video.play();\r\n    }).catch((error) => window.alert(error));\r\n\r\n    save_button.addEventListener('click', function() {\r\n        save_image(video, canvas);\r\n    });\r\n\r\n    if(getFromLocalStorage() === null || isNaN(getFromLocalStorage())) {\r\n        pushToLocalStorage(0);\r\n    }\r\n    setInterval(() => {\r\n        if(getFromLocalStorage()  === timer/1000) {\r\n            save_image(video, canvas);\r\n            pushToLocalStorage(0);\r\n        }else {\r\n            const aux = getFromLocalStorage();\r\n            pushToLocalStorage(aux+1);\r\n        }\r\n    }, 1000);\r\n};\r\n"],"names":["save_image","video","canvas","getContext","drawImage","width","height","getFromLocalStorage","parseInt","localStorage","getItem","pushToLocalStorage","seconds","console","log","setItem","toString","timer","document","querySelector","save_button","navigator","mediaDevices","getUserMedia","audio","then","stream","srcObject","play","catch","error","window","alert","addEventListener","isNaN","setInterval"],"mappings":"4EAMSA,WAAWC,MAAOC,QACvBA,OAAOC,WAAW,MAAMC,UAAUH,MAAO,EAAG,EAAGC,OAAOG,MAAOH,OAAOI,iBAO/DC,6BACEC,SAASC,aAAaC,QAAQ,6BAOhCC,mBAAmBC,SACxBC,QAAQC,IAAIF,SACZH,aAAaM,QAAQ,kBAAmBH,QAAQI,uGAG/BC,YACbhB,MAAQiB,SAASC,cAAc,WAC/BjB,OAASgB,SAASC,cAAc,WAChCC,YAAcF,SAASC,cAAc,gBAEzCE,UAAUC,aAAaC,aAAa,CAAEtB,OAAO,EAAMuB,OAAO,IAASC,MAAMC,SACrEzB,MAAM0B,UAAYD,OAClBzB,MAAM2B,UACPC,OAAOC,OAAUC,OAAOC,MAAMF,SAEjCV,YAAYa,iBAAiB,SAAS,WAClCjC,WAAWC,MAAOC,YAGO,OAA1BK,uBAAkC2B,MAAM3B,yBACvCI,mBAAmB,GAEvBwB,aAAY,QACL5B,wBAA2BU,MAAM,IAChCjB,WAAWC,MAAOC,QAClBS,mBAAmB,OACjB,CAEFA,mBADYJ,sBACW,MAE5B"}